<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/error.css" />
    <title>Error: 404</title>
  </head>
  <body>
    <!--Itachi Genjutsu 404 Page-->
    <figure>
      <video
        src="assets/video/WhatsApp Video 2025-10-27 at 20.54.24_a0b737c9.mp4"
        type="video/mp4"
        id="itachi"
        muted
      ></video>
      <figcaption id="hiddenText" class="hidden">
        Amaterasu
      </figcaption>
    </figure>

    <!--Loading Chakra-->
        <div id="chakra-loader" class="hidden" role="status" aria-live="polite">
          <img
            src="assets/images/sharingan.jpg"
            alt="Genjutsu"
            class="chakra-img"
            loading="eager"
          />
          <p>You have fallen under a Genjutsu!</p>
        </div>

    <script>
      // Loading Part
      const loader = document.getElementById("chakra-loader");

      function showLoader() {
        if (!loader) return;
        loader.classList.remove("hidden");
        loader.classList.add("fade-in");
        loader.style.display = "flex";
      }

      function hideLoader() {
        if (!loader) return;
        loader.classList.remove("fade-in");
        loader.classList.add("fade-out");
        setTimeout(() => {
          loader.classList.add("hidden");
          loader.style.display = "none";
        }, 1000);
      }

      const continueBtn = document.createElement("button");
      continueBtn.textContent = "Continue";
      continueBtn.id = "continuebtn";
      continueBtn.style.cssText = `
        background: linear-gradient(135deg, #ff0000, #660000);
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
        border: none;
        border-radius: 5px;
        padding: 12px 30px;
        cursor: pointer;
        text-shadow: 0 0 10px rgba(255, 50, 50, 1);
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.7);
        transition: all 0.3s ease;
      `;
      continueBtn.onmouseover = () => (continueBtn.style.transform = "scale(1.1)");
      continueBtn.onmouseout = () => (continueBtn.style.transform = "scale(1)");

      // Itachi Genjutsu 404 Script
      window.onload = function () {
        const video = document.getElementById("itachi");
        const visualise = document.getElementById("hiddenText");

        const loaderDuration = 2500;
        const genjutsuDuration = 4000;
        const redirectDelay = 1000;

        showLoader();

        setTimeout(() => {
          hideLoader();

          // Show continue button after fade-out
          setTimeout(() => {
            loader.innerHTML = "";
            loader.appendChild(continueBtn);
            loader.classList.remove("hidden", "fade-out");
            loader.style.display = "flex";
            loader.classList.add("fade-in");
          }, 1000);
        }, loaderDuration);

        continueBtn.addEventListener("click", () => {
          loader.classList.add("fade-out");
          setTimeout(() => {
            loader.style.display = "none";
            visualise.classList.remove("hidden");
            video.muted = false;
            video.currentTime = 0;
            video.play().catch((err) => console.log("Playback blocked:", err));

            setTimeout(() => {
              video.pause();
              visualise.classList.add("hidden");
              document.body.classList.add("fade-out");
              setTimeout(() => {
                window.location.href = "index.html";
              }, redirectDelay);
            }, genjutsuDuration);
          }, 800);
        });
      };
    </script>
  </body>
</html>